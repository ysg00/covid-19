(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{226:function(e,t,a){e.exports=a(345)},235:function(e,t,a){},301:function(e,t,a){},329:function(e,t,a){},331:function(e,t,a){},343:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(60),o=a.n(c),i=a(356),s=a(100),l=a(63),u=a(357),m=a(354),d=a(116),f=a(74),h=a(157),p=a(76),b=a(134),v={darkMode:!1,timseriesData:{},lastUpdateData:{}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODE":return Object(b.a)({},e,{darkMode:!e.darkMode});case"UPDATE_TIMESERIES_DATA":return Object(b.a)({},e,{timseriesData:t.timseriesData});case"UPDATE_LASTUPDATE_DATA":return Object(b.a)({},e,{lastUpdateData:t.lastUpdateData});default:return e}},E=a(57),j=(a(208),a(33)),O=a(186),D=a.n(O),w=a(350),y=a(67),S=a(187),C=a.n(S),_=(a(235),function(e){var t=e.time,a=e.confirmed,c=e.recovered,o=e.deaths,i=Object(n.useRef)();return Object(n.useEffect)((function(){for(var e,n,r="Confirmed",s="Recovered",l="Deaths",u=[].concat(Object(j.a)(a),Object(j.a)(c),Object(j.a)(o)),m=Math.max.apply(Math,Object(j.a)(u));m%1e3!==0;)m+=1;var d=m/4,f=[0,d,2*d,3*d,m];C.a.generate({bindto:i.current,title:{text:"Global TimeSeries",positiion:"top-center"},padding:{left:50,top:10,right:16,bottom:-10},data:{x:"x",columns:[["x"].concat(Object(j.a)(t)),[r].concat(Object(j.a)(a)),[s].concat(Object(j.a)(c)),[l].concat(Object(j.a)(o))],types:(e={},Object(y.a)(e,r,"line"),Object(y.a)(e,s,"line"),Object(y.a)(e,l,"line"),e),colors:(n={},Object(y.a)(n,r,"#FF6E6D"),Object(y.a)(n,s,"#66B46A"),Object(y.a)(n,l,"#606060"),n)},point:{show:!1},axis:{x:{type:"timeseries",tick:{count:2,values:["2020-02-01","2020-03-01"],format:"%b",multiline:!1}},y:{type:"linear",min:0,max:m,padding:{bottom:0,top:0},tick:{count:5,values:f,format:function(e){return e%250===0&&0!==e?"".concat((e/1e3).toFixed(2),"k"):"".concat(e)}}}},tooltip:{format:{title:function(e,a){return t[a]}},position:function(e,t,a,n){return{top:25,left:55}}}})}),[t,a,c,o]),r.a.createElement("div",{className:"trend-chart",ref:i})}),x=function(e){var t=Object(n.useState)(!0),a=Object(E.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)({}),u=Object(E.a)(i,2),m=u[0],d=u[1],h=w.a.Meta;return Object(n.useEffect)((function(){var e={time:[],confirmed:[],recovered:[],deaths:[]},t={time:[],confirmed:[],recovered:[],deaths:[]},a={time:[],confirmed:[],recovered:[],deaths:[]},n={usData:{},globData:{}};Promise.all(["https://services1.arcgis.com/0MSEUqKaxRlEPj5g/ArcGIS/rest/services/ncov_cases/FeatureServer/2/query?where=1%3D1&outFields=*&f=json","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv"].map((function(e){return fetch(e)}))).then((function(r){!function(e){e.json().then((function(e){if(!e.features)throw new Error("error fetch data");for(var t={},a={},r={Confirmed:0,Recovered:0,Deaths:0},c=0;c<e.features.length;c+=1)e.features[c].attributes&&"US"===e.features[c].attributes.Country_Region&&(t=Object.assign({},e.features[c].attributes)),e.features[c].attributes&&"China"===e.features[c].attributes.Country_Region&&(a=Object.assign({},e.features[c].attributes)),r.Confirmed+=e.features[c].attributes.Confirmed,r.Recovered+=e.features[c].attributes.Recovered,r.Deaths+=e.features[c].attributes.Deaths;n.usData=Object.assign({},t),n.globData=Object.assign({},r),n.cData=Object.assign({},a)})).catch((function(e){console.log(e)}))}(r[0]),r.slice(1,4).forEach((function(r,c){r.text().then((function(r){D.a.parse(r,{complete:function(r){return function(r){var c=function(n,r,c){n.forEach((function(n){"US"===n[1]&&(t[r][c]+=parseInt(n[c+4])),"China"===n[1]&&(e[r][c]+=parseInt(n[c+4])),a[r][c]+=parseInt(n[c+4])}))},i=r.csvData,s=r.idx;if(0===a.time.length){var l=i[0].slice(4).map((function(e){var t=e.split("/");return t.unshift("20".concat(t.pop())),t.join("-")}));e.time=Object(j.a)(l),e.confirmed=new Array(e.time.length).fill(0),e.recovered=new Array(e.time.length).fill(0),e.deaths=new Array(e.time.length).fill(0),t.time=Object(j.a)(l),t.confirmed=new Array(t.time.length).fill(0),t.recovered=new Array(t.time.length).fill(0),t.deaths=new Array(t.time.length).fill(0),a.time=Object(j.a)(l),a.confirmed=new Array(a.time.length).fill(0),a.recovered=new Array(a.time.length).fill(0),a.deaths=new Array(a.time.length).fill(0)}if(0===s)a.time.forEach((function(e,t){return c(i,"confirmed",t)}));else if(1===s)a.time.forEach((function(e,t){return c(i,"recovered",t)}));else{a.time.forEach((function(e,t){return c(i,"deaths",t)}));var u=a.confirmed.length;a.confirmed[u-1]=n.globData.Confirmed,a.recovered[u-1]=n.globData.Recovered,a.deaths[u-1]=n.globData.Deaths,e.confirmed[u-1]=n.cData.Confirmed,e.recovered[u-1]=n.cData.Recovered,e.deaths[u-1]=n.cData.Deaths,t.confirmed[u-1]=n.usData.Confirmed,t.recovered[u-1]=n.usData.Recovered,t.deaths[u-1]=n.usData.Deaths,Object(f.b)((function(){o(!1),d({glob:a,us:t,c:e})}))}}({csvData:r.data,idx:c})}})})).catch((function(e){return console.log(e)}))}))}))}),[]),r.a.createElement(s.a,{justify:"space-between"},r.a.createElement(l.a,{span:8},r.a.createElement(w.a,{loading:c},r.a.createElement(h,{title:"Global Case TimeSeries",description:r.a.createElement(_,m.glob)}))),r.a.createElement(l.a,{span:8},r.a.createElement(w.a,{loading:c},r.a.createElement(h,{title:"China Case TimeSeries",description:r.a.createElement(_,m.c)}))),r.a.createElement(l.a,{span:8,className:"float-right"},r.a.createElement(w.a,{loading:c},r.a.createElement(h,{title:"US Case TimeSeries",description:r.a.createElement(_,m.us)}))))},R=a(352),A=a(348),k=a(353),I=(a(301),function(e){var t=Object(n.useState)({}),a=Object(E.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(!0),m=Object(E.a)(u,2),d=m[0],h=m[1],p=i.a.Content,b=w.a.Meta;return Object(n.useEffect)((function(){fetch("https://services1.arcgis.com/0MSEUqKaxRlEPj5g/ArcGIS/rest/services/ncov_cases/FeatureServer/2/query?where=1%3D1&outFields=*&f=json").then((function(e){e.json().then((function(e){if(!e.features)throw new Error("error fetch data");for(var t={},a={},n={Confirmed:0,Recovered:0,Deaths:0},r=0;r<e.features.length;r+=1)e.features[r].attributes&&"US"===e.features[r].attributes.Country_Region&&(t=Object.assign({},e.features[r].attributes)),e.features[r].attributes&&"China"===e.features[r].attributes.Country_Region&&(a=Object.assign({},e.features[r].attributes)),n.Confirmed+=e.features[r].attributes.Confirmed,n.Recovered+=e.features[r].attributes.Recovered,n.Deaths+=e.features[r].attributes.Deaths;Object(f.b)((function(){o({Global:n,China:{Confirmed:a.Confirmed,Recovered:a.Recovered,Deaths:a.Deaths},USA:{Confirmed:t.Confirmed,Recovered:t.Recovered,Deaths:t.Deaths}}),h(!1)}))})).catch((function(e){console.log(e)}))}))}),[]),r.a.createElement(R.a,{loading:d,active:!0},r.a.createElement(p,{className:"main-data"},r.a.createElement(A.a,{effect:"fade",autoplay:!0,dotPosition:"bottom"},Object.keys(c).map((function(e){return r.a.createElement(w.a,null,r.a.createElement(b,{title:r.a.createElement("h1",null,e),description:r.a.createElement(s.a,null,Object.keys(c[e]).map((function(t){return r.a.createElement(l.a,{span:8,className:"text-center"},r.a.createElement(k.a,{title:r.a.createElement("h1",null,t),value:c[e][t]}))})))}))})))))}),M=a(206),U=a(131),F=a(207),T=a(199),P=a(358),G=a(349),L=a(351),B=a(355),q=a(161),N=a(162),V=a(135),H=a(209),J=a(6),K=a(198),W=a.n(K),z=function(e){var t=e.sdata,a=e.renderData,n=a.lastConfirmed,c=a.lastRecovered,o=a.lastDeaths,i=w.a.Meta;return r.a.createElement(w.a,{bodyStyle:{padding:"0 15px"}},r.a.createElement(i,{title:t.province?"".concat(t.province,", ").concat(t.country):t.country,description:r.a.createElement("div",null,r.a.createElement("h6",null,"Lastest Update:"),r.a.createElement("h6",null,"".concat(new Date(t.lastUpdated).toLocaleString())),n?r.a.createElement("h5",null,"Confirmed: ".concat(n.toLocaleString())):null,c?r.a.createElement("h5",null,"Recoverd: ".concat(c.toLocaleString())):null,o?r.a.createElement("h5",null,"Deaths: ".concat(o.toLocaleString())):null,r.a.createElement(W.a,{data:[{x:Object(j.a)(t.time),y:Object(j.a)(t.confirmed),name:"Confirmed",type:"scatter",mode:"lines",marker:{color:"#FF6E6D"}},{x:Object(j.a)(t.time),y:Object(j.a)(t.recovered),name:"Recovered",type:"scatter",mode:"lines",marker:{color:"#66B46A"}},{x:Object(j.a)(t.time),y:Object(j.a)(t.deaths),name:"Deaths",type:"scatter",mode:"lines",marker:{color:"#606060"}}],layout:{width:200,height:200,showlegend:!1,margin:{l:30,t:10,r:10,b:24},plot_bgcolor:"#f0f2f5",paper_bgcolor:"#f0f2f5",xaxis:{showticklabels:!1}},config:{displayModeBar:!1}}))}))},$=(a(329),function(e){var t=Object(n.useState)(void 0),a=Object(E.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)({}),s=Object(E.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(""),d=Object(E.a)(m,2),h=d[0],p=d[1],b=w.a.Meta;return Object(n.useEffect)((function(){var e="rgb(0,0,0, 0.5)",t="rgb(0,255,0, 0.3)",a="rgb(255,0,0, 0.3)",n=new H.a({element:document.getElementById("map-popup"),autoPan:!0,autoPanAnimation:{duration:250}}),r=function(e,t){c(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.get?e.get("country"):e.properties.country,n=e.get?e.get("province"):e.properties.province,r=e.get?e.get("confirmed"):e.properties.confirmed,c=e.get?e.get("recovered"):e.properties.recovered,o=e.get?e.get("deaths"):e.properties.deaths,i=[],s=[],l=[],u=[],m=0;m<=r.length-1;m++){var d=r[m].count,f=c[m].count,h=o[m].count;(t||i.length||d||f||h)&&(i.push(r[m].time.replace(/\//g,"-").replace(/ .*/,"")),s.push(d),l.push(f),u.push(h))}return{country:a,province:n,lastUpdated:Date.parse(r[r.length-1].time),time:i,confirmed:s,recovered:l,deaths:u}}(e),t)},c=function(e,t){var a=e.confirmed.length-1,r=e.confirmed[a],c=e.recovered[a],i=e.deaths[a];Object(f.b)((function(){o(t),u(e),p({lastConfirmed:r,lastRecovered:c,lastDeaths:i})})),n.setPosition(t)},i=new M.a({target:"map",layers:[new T.a({title:"Base maps",openInLayerSwitcher:!0,layers:[new P.a({title:"Open Street",baseLayer:!0,source:new L.a})]}),new G.a({title:"COVID-19 cases",source:new B.a({format:new F.a,url:"https://raw.githubusercontent.com/HuidaeCho/covid-19/master/geodata.json"}),style:function(n,r){return function(n,r){var c=.5*Math.log10(s/r)+1,o=n.get("confirmed").length-1,i=n.get("confirmed")[o].count,l=n.get("recovered")[o].count,u=n.get("deaths")[o].count,m=10*Math.log10(i+1),d=Math.sqrt((l+u)/i)*m,f=Math.sqrt(u/i)*m;return m*=c,d*=c,f*=c,[new q.b({image:new N.a({radius:m,fill:new V.a({color:a})})}),new q.b({image:new N.a({radius:d,fill:new V.a({color:t})})}),new q.b({image:new N.a({radius:f,fill:new V.a({color:e})})})]}(n,r)}})],view:new U.a({center:Object(J.d)([-80,35]),zoom:3}),overlays:[n]}),s=i.getView().getResolution();i.on("pointermove",(function(e){i.getTargetElement().style.cursor=i.hasFeatureAtPixel(e.pixel)?"pointer":""})),i.on("singleclick",(function(e){var t=i.forEachFeatureAtPixel(e.pixel,(function(e,t){return e}));t?(window.location.hash="feature-"+t.getId(),r(t,e.coordinate)):n.setPosition(void 0)}))}),[]),r.a.createElement(w.a,null,r.a.createElement(b,{description:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"map",className:"heat-map"}),c?r.a.createElement("div",{id:"map-popup",className:"ol-popup"},r.a.createElement(z,{sdata:l,coor:c,renderData:h})):r.a.createElement("div",{id:"map-popup"}))}))}),Q=(a(331),function(e){var t=i.a.Header,a=i.a.Content,n=(i.a.Sider,i.a.Footer),c=Object(d.b)(g),o=r.a.createElement(i.a,{id:"app"},r.a.createElement(t,null,r.a.createElement("h1",{style:{color:"white"}},"Covid-19 Dashboard")),r.a.createElement(i.a,null,r.a.createElement(a,{style:{padding:"0 50px"}},r.a.createElement(s.a,{justify:"center"},r.a.createElement(l.a,{id:"main-content",span:20},r.a.createElement(I,null),r.a.createElement($,null),r.a.createElement(x,null))))),r.a.createElement(n,null,"Footer"));return r.a.createElement(f.a,{store:c},r.a.createElement(h.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:function(){return o}}),r.a.createElement(p.a,{component:function(){return r.a.createElement(u.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(h.b,{to:"/"},r.a.createElement(m.a,{type:"primary"},"Back Home"))})}}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(343);o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[226,1,2]]]);
//# sourceMappingURL=main.a51119af.chunk.js.map